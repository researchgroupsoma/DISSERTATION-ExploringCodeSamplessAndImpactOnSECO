event_id,event_type,event_repository,code_sample_event,event_created_at,event_payload,event_action,language
21342593581,IssueCommentEvent,DataDog/dd-trace-dotnet,0.0,2022-04-18T22:19:39Z,"{'action': 'created', 'issue': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692', 'repository_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet', 'labels_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/labels{/name}', 'comments_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/comments', 'events_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/events', 'html_url': 'https://github.com/DataDog/dd-trace-dotnet/issues/2692', 'id': 1205747167, 'node_id': 'I_kwDOBhLL285H3j3f', 'number': 2692, 'title': ""Setting configuration in code doesn't seem to be honored"", 'user': {'login': 'turacma', 'id': 937441, 'node_id': 'MDQ6VXNlcjkzNzQ0MQ==', 'avatar_url': 'https://avatars.githubusercontent.com/u/937441?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/turacma', 'html_url': 'https://github.com/turacma', 'followers_url': 'https://api.github.com/users/turacma/followers', 'following_url': 'https://api.github.com/users/turacma/following{/other_user}', 'gists_url': 'https://api.github.com/users/turacma/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/turacma/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/turacma/subscriptions', 'organizations_url': 'https://api.github.com/users/turacma/orgs', 'repos_url': 'https://api.github.com/users/turacma/repos', 'events_url': 'https://api.github.com/users/turacma/events{/privacy}', 'received_events_url': 'https://api.github.com/users/turacma/received_events', 'type': 'User', 'site_admin': False}, 'labels': [], 'state': 'open', 'locked': False, 'assignee': None, 'assignees': [], 'milestone': None, 'comments': 3, 'created_at': '2022-04-15T17:33:21Z', 'updated_at': '2022-04-18T22:19:38Z', 'closed_at': None, 'author_association': 'NONE', 'active_lock_reason': None, 'body': '**Describe the bug**\r\nThe [documentation](https://docs.datadoghq.com/tracing/setup_overview/setup/dotnet-core/?tab=code#enable-the-tracer-for-your-service) suggests that configuration set in code should take precedence, but this doesn\'t seem to be true in practice. When setting configuration in code I can see 2 distinct configure lines in the tracer debug log, with the second containing the field values set in code:\r\n\r\n```\r\n2022-04-15 17:10:46.867 +00:00 [INF] DATADOG TRACER CONFIGURATION - {""date"":""2022-04-15T17:10:46.8553995+00:00"",""os_name"":""Linux"",""os_version"":""Unix 4.14.268.205"",""version"":""2.6.0.0"",""platform"":""x64"",""lang"":"".NET"",""lang_version"":""6.0.2"",""env"":null,""enabled"":true,""service"":""Eight.AppApi.RestApi"",""agent_url"":""http://172.31.77.80:8126"",""debug"":true,""health_checks_enabled"":false,""analytics_enabled"":false,""sample_rate"":null,""sampling_rules"":null,""tags"":[],""log_injection_enabled"":false,""runtime_metrics_enabled"":false,""disabled_integrations"":[],""routetemplate_resourcenames_enabled"":true,""routetemplate_expansion_enabled"":false,""partialflush_enabled"":false,""partialflush_minspans"":500,""runtime_id"":""267121e2-914b-42db-96da-286a7f3c6679"",""agent_reachable"":true,""agent_error"":"""",""appsec_enabled"":false,""appsec_trace_rate_limit"":100,""appsec_rules_file_path"":""(default)"",""appsec_libddwaf_version"":""(none)"",""direct_logs_submission_enabled_integrations"":[],""direct_logs_submission_enabled"":false,""direct_logs_submission_error"":"""",""dd_trace_methods"":""""}  { MachineName: ""."", Process: ""[17 Eight.AppApi.RestApi]"", AppDomain: ""[1 Eight.AppApi.RestApi]"", AssemblyLoadContext: ""\\""\\"" Datadog.Trace.ClrProfiler.Managed.Loader.ManagedProfilerAssemblyLoadContext #1"", TracerVersion: ""2.6.0.0"" }\r\n2022-04-15 17:10:47.063 +00:00 [INF] DATADOG TRACER CONFIGURATION - {""date"":""2022-04-15T17:10:47.0189685+00:00"",""os_name"":""Linux"",""os_version"":""Unix 4.14.268.205"",""version"":""2.4.4.0"",""platform"":""x64"",""lang"":"".NET"",""lang_version"":""6.0.2"",""env"":""staging"",""enabled"":true,""service"":""app-api"",""agent_url"":""http://172.31.77.80:8126/"",""debug"":true,""health_checks_enabled"":false,""analytics_enabled"":false,""sample_rate"":null,""sampling_rules"":null,""tags"":[],""log_injection_enabled"":false,""runtime_metrics_enabled"":false,""disabled_integrations"":[],""routetemplate_resourcenames_enabled"":true,""partialflush_enabled"":false,""partialflush_minspans"":500,""runtime_id"":""267121e2-914b-42db-96da-286a7f3c6679"",""agent_reachable"":true,""agent_error"":"""",""appsec_enabled"":false,""appsec_trace_rate_limit"":100,""appsec_rules_file_path"":""(default)"",""appsec_libddwaf_version"":""(none)"",""direct_logs_submission_enabled_integrations"":[],""direct_logs_submission_enabled"":false,""direct_logs_submission_error"":""""}  { MachineName: ""."", Process: ""[17 Eight.AppApi.RestApi]"", AppDomain: ""[1 Eight.AppApi.RestApi]"", AssemblyLoadContext: ""\\""Default\\"" System.Runtime.Loader.DefaultAssemblyLoadContext #2"", TracerVersion: ""2.4.4.0"" }\r\n```\r\n\r\nHowever, when I login and view my APM dashboard, it\'s clear only the first takes precendence (e.g. the data has no env or version tag). The only way I can reliably configure these tags is via the environment variables.\r\n\r\n**To Reproduce**\r\n1. Docker image with tracer installed as part of image, minimal env vars to start the tracer:\r\n```\r\nexport CORECLR_ENABLE_PROFILING=1\r\nexport CORECLR_PROFILER={846F5F1C-F9AE-4B07-969E-05C26BC060D8}\r\nexport CORECLR_PROFILER_PATH=/opt/datadog/Datadog.Trace.ClrProfiler.Native.so\r\nexport DD_DOTNET_TRACER_HOME=/opt/datadog\r\n```\r\n\r\n2. .NET application with code to configure settings:\r\n\r\n```\r\n            var settings = TracerSettings.FromDefaultSources();\r\n            settings.Environment = environment;\r\n            settings.ServiceName = serviceName;\r\n            settings.ServiceVersion = version;\r\n            settings.Exporter.AgentUri = new Uri($""http://{agentHost}:8126/"");\r\n            Tracer.Configure(settings);\r\n```\r\n\r\n**Expected behavior**\r\nSetting configuration in code should override env vars\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**Runtime environment (please complete the following information):**\r\n- Instrumentation mode: Installation on container \r\n```\r\nRUN mkdir -p /opt/datadog \\\r\n    && mkdir -p /var/log/datadog \\\r\n    && TRACER_VERSION=$(curl -s https://api.github.com/repos/DataDog/dd-trace-dotnet/releases/latest | grep tag_name | cut -d \'""\' -f 4 | cut -c2-) \\\r\n    && curl -LO https://github.com/DataDog/dd-trace-dotnet/releases/download/v${TRACER_VERSION}/datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb \\\r\n    && dpkg -i ./datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb \\\r\n    && rm ./datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb\r\n```\r\n\r\n- Tracer version: 2.4.4.0\r\n- OS: Ubuntu docker container running on an AL2 EC2 instance \r\n- CLR: 2.4.4.0 with .NET 6.x\r\n\r\n<!--\r\nNOTE: To contact our support team, see https://www.datadoghq.com/support/\r\nWhen contacting support, please include the information requested above.\r\nIf possible, also include the tracer log files found (by default) in:\r\nWindows: %ProgramData%\\Datadog .NET Tracer\\logs\\\r\nLinux: /var/log/datadog/dotnet/\r\n--!>\r\n', 'reactions': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/timeline', 'performed_via_github_app': None}, 'comment': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/comments/1101812415', 'html_url': 'https://github.com/DataDog/dd-trace-dotnet/issues/2692#issuecomment-1101812415', 'issue_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692', 'id': 1101812415, 'node_id': 'IC_kwDOBhLL285BrFK_', 'user': {'login': 'turacma', 'id': 937441, 'node_id': 'MDQ6VXNlcjkzNzQ0MQ==', 'avatar_url': 'https://avatars.githubusercontent.com/u/937441?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/turacma', 'html_url': 'https://github.com/turacma', 'followers_url': 'https://api.github.com/users/turacma/followers', 'following_url': 'https://api.github.com/users/turacma/following{/other_user}', 'gists_url': 'https://api.github.com/users/turacma/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/turacma/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/turacma/subscriptions', 'organizations_url': 'https://api.github.com/users/turacma/orgs', 'repos_url': 'https://api.github.com/users/turacma/repos', 'events_url': 'https://api.github.com/users/turacma/events{/privacy}', 'received_events_url': 'https://api.github.com/users/turacma/received_events', 'type': 'User', 'site_admin': False}, 'created_at': '2022-04-18T22:19:38Z', 'updated_at': '2022-04-18T22:19:38Z', 'author_association': 'NONE', 'body': ""Looking back over my initial report again, I noticed that the first log line suggested the tracer version was 2.6.0, but the second shows 2.4.4. Because the code that a teammate wrote for pulling the tracer for the docker container isn't version locked, but dependency configuration in the .NET package is, there seems to have been a drift between the 2.\r\n\r\nAfter updating my application to use 2.6.0 in code, things seem to be working as expected. Will leave this open for someone to comment why this doesn't generate an error and silently fails, but I think my immediate issue is resolved."", 'reactions': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/comments/1101812415/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'performed_via_github_app': None}}",created,C#
21341980232,IssueCommentEvent,DataDog/dd-trace-dotnet,0.0,2022-04-18T21:25:35Z,"{'action': 'created', 'issue': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692', 'repository_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet', 'labels_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/labels{/name}', 'comments_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/comments', 'events_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/events', 'html_url': 'https://github.com/DataDog/dd-trace-dotnet/issues/2692', 'id': 1205747167, 'node_id': 'I_kwDOBhLL285H3j3f', 'number': 2692, 'title': ""Setting configuration in code doesn't seem to be honored"", 'user': {'login': 'turacma', 'id': 937441, 'node_id': 'MDQ6VXNlcjkzNzQ0MQ==', 'avatar_url': 'https://avatars.githubusercontent.com/u/937441?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/turacma', 'html_url': 'https://github.com/turacma', 'followers_url': 'https://api.github.com/users/turacma/followers', 'following_url': 'https://api.github.com/users/turacma/following{/other_user}', 'gists_url': 'https://api.github.com/users/turacma/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/turacma/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/turacma/subscriptions', 'organizations_url': 'https://api.github.com/users/turacma/orgs', 'repos_url': 'https://api.github.com/users/turacma/repos', 'events_url': 'https://api.github.com/users/turacma/events{/privacy}', 'received_events_url': 'https://api.github.com/users/turacma/received_events', 'type': 'User', 'site_admin': False}, 'labels': [], 'state': 'open', 'locked': False, 'assignee': None, 'assignees': [], 'milestone': None, 'comments': 1, 'created_at': '2022-04-15T17:33:21Z', 'updated_at': '2022-04-18T21:25:35Z', 'closed_at': None, 'author_association': 'NONE', 'active_lock_reason': None, 'body': '**Describe the bug**\r\nThe [documentation](https://docs.datadoghq.com/tracing/setup_overview/setup/dotnet-core/?tab=code#enable-the-tracer-for-your-service) suggests that configuration set in code should take precedence, but this doesn\'t seem to be true in practice. When setting configuration in code I can see 2 distinct configure lines in the tracer debug log, with the second containing the field values set in code:\r\n\r\n```\r\n2022-04-15 17:10:46.867 +00:00 [INF] DATADOG TRACER CONFIGURATION - {""date"":""2022-04-15T17:10:46.8553995+00:00"",""os_name"":""Linux"",""os_version"":""Unix 4.14.268.205"",""version"":""2.6.0.0"",""platform"":""x64"",""lang"":"".NET"",""lang_version"":""6.0.2"",""env"":null,""enabled"":true,""service"":""Eight.AppApi.RestApi"",""agent_url"":""http://172.31.77.80:8126"",""debug"":true,""health_checks_enabled"":false,""analytics_enabled"":false,""sample_rate"":null,""sampling_rules"":null,""tags"":[],""log_injection_enabled"":false,""runtime_metrics_enabled"":false,""disabled_integrations"":[],""routetemplate_resourcenames_enabled"":true,""routetemplate_expansion_enabled"":false,""partialflush_enabled"":false,""partialflush_minspans"":500,""runtime_id"":""267121e2-914b-42db-96da-286a7f3c6679"",""agent_reachable"":true,""agent_error"":"""",""appsec_enabled"":false,""appsec_trace_rate_limit"":100,""appsec_rules_file_path"":""(default)"",""appsec_libddwaf_version"":""(none)"",""direct_logs_submission_enabled_integrations"":[],""direct_logs_submission_enabled"":false,""direct_logs_submission_error"":"""",""dd_trace_methods"":""""}  { MachineName: ""."", Process: ""[17 Eight.AppApi.RestApi]"", AppDomain: ""[1 Eight.AppApi.RestApi]"", AssemblyLoadContext: ""\\""\\"" Datadog.Trace.ClrProfiler.Managed.Loader.ManagedProfilerAssemblyLoadContext #1"", TracerVersion: ""2.6.0.0"" }\r\n2022-04-15 17:10:47.063 +00:00 [INF] DATADOG TRACER CONFIGURATION - {""date"":""2022-04-15T17:10:47.0189685+00:00"",""os_name"":""Linux"",""os_version"":""Unix 4.14.268.205"",""version"":""2.4.4.0"",""platform"":""x64"",""lang"":"".NET"",""lang_version"":""6.0.2"",""env"":""staging"",""enabled"":true,""service"":""app-api"",""agent_url"":""http://172.31.77.80:8126/"",""debug"":true,""health_checks_enabled"":false,""analytics_enabled"":false,""sample_rate"":null,""sampling_rules"":null,""tags"":[],""log_injection_enabled"":false,""runtime_metrics_enabled"":false,""disabled_integrations"":[],""routetemplate_resourcenames_enabled"":true,""partialflush_enabled"":false,""partialflush_minspans"":500,""runtime_id"":""267121e2-914b-42db-96da-286a7f3c6679"",""agent_reachable"":true,""agent_error"":"""",""appsec_enabled"":false,""appsec_trace_rate_limit"":100,""appsec_rules_file_path"":""(default)"",""appsec_libddwaf_version"":""(none)"",""direct_logs_submission_enabled_integrations"":[],""direct_logs_submission_enabled"":false,""direct_logs_submission_error"":""""}  { MachineName: ""."", Process: ""[17 Eight.AppApi.RestApi]"", AppDomain: ""[1 Eight.AppApi.RestApi]"", AssemblyLoadContext: ""\\""Default\\"" System.Runtime.Loader.DefaultAssemblyLoadContext #2"", TracerVersion: ""2.4.4.0"" }\r\n```\r\n\r\nHowever, when I login and view my APM dashboard, it\'s clear only the first takes precendence (e.g. the data has no env or version tag). The only way I can reliably configure these tags is via the environment variables.\r\n\r\n**To Reproduce**\r\n1. Docker image with tracer installed as part of image, minimal env vars to start the tracer:\r\n```\r\nexport CORECLR_ENABLE_PROFILING=1\r\nexport CORECLR_PROFILER={846F5F1C-F9AE-4B07-969E-05C26BC060D8}\r\nexport CORECLR_PROFILER_PATH=/opt/datadog/Datadog.Trace.ClrProfiler.Native.so\r\nexport DD_DOTNET_TRACER_HOME=/opt/datadog\r\n```\r\n\r\n2. .NET application with code to configure settings:\r\n\r\n```\r\n            var settings = TracerSettings.FromDefaultSources();\r\n            settings.Environment = environment;\r\n            settings.ServiceName = serviceName;\r\n            settings.ServiceVersion = version;\r\n            settings.Exporter.AgentUri = new Uri($""http://{agentHost}:8126/"");\r\n            Tracer.Configure(settings);\r\n```\r\n\r\n**Expected behavior**\r\nSetting configuration in code should override env vars\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**Runtime environment (please complete the following information):**\r\n- Instrumentation mode: Installation on container \r\n```\r\nRUN mkdir -p /opt/datadog \\\r\n    && mkdir -p /var/log/datadog \\\r\n    && TRACER_VERSION=$(curl -s https://api.github.com/repos/DataDog/dd-trace-dotnet/releases/latest | grep tag_name | cut -d \'""\' -f 4 | cut -c2-) \\\r\n    && curl -LO https://github.com/DataDog/dd-trace-dotnet/releases/download/v${TRACER_VERSION}/datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb \\\r\n    && dpkg -i ./datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb \\\r\n    && rm ./datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb\r\n```\r\n\r\n- Tracer version: 2.4.4.0\r\n- OS: Ubuntu docker container running on an AL2 EC2 instance \r\n- CLR: 2.4.4.0 with .NET 6.x\r\n\r\n<!--\r\nNOTE: To contact our support team, see https://www.datadoghq.com/support/\r\nWhen contacting support, please include the information requested above.\r\nIf possible, also include the tracer log files found (by default) in:\r\nWindows: %ProgramData%\\Datadog .NET Tracer\\logs\\\r\nLinux: /var/log/datadog/dotnet/\r\n--!>\r\n', 'reactions': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/timeline', 'performed_via_github_app': None}, 'comment': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/comments/1101781496', 'html_url': 'https://github.com/DataDog/dd-trace-dotnet/issues/2692#issuecomment-1101781496', 'issue_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692', 'id': 1101781496, 'node_id': 'IC_kwDOBhLL285Bq9n4', 'user': {'login': 'turacma', 'id': 937441, 'node_id': 'MDQ6VXNlcjkzNzQ0MQ==', 'avatar_url': 'https://avatars.githubusercontent.com/u/937441?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/turacma', 'html_url': 'https://github.com/turacma', 'followers_url': 'https://api.github.com/users/turacma/followers', 'following_url': 'https://api.github.com/users/turacma/following{/other_user}', 'gists_url': 'https://api.github.com/users/turacma/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/turacma/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/turacma/subscriptions', 'organizations_url': 'https://api.github.com/users/turacma/orgs', 'repos_url': 'https://api.github.com/users/turacma/repos', 'events_url': 'https://api.github.com/users/turacma/events{/privacy}', 'received_events_url': 'https://api.github.com/users/turacma/received_events', 'type': 'User', 'site_admin': False}, 'created_at': '2022-04-18T21:25:35Z', 'updated_at': '2022-04-18T21:25:35Z', 'author_association': 'NONE', 'body': ""@kmcc049 I believe that's expected. Even though I'm setting all values with environment variables, I see multiple services in APM, one for the service itself, one for http client calls, and then one for each dependency, e.g. database or AWS service. I don't think this is related to my issue, but I find it interesting you are able to set these values in code."", 'reactions': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/comments/1101781496/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'performed_via_github_app': None}}",created,C#
21310089776,IssuesEvent,DataDog/dd-trace-dotnet,0.0,2022-04-15T17:33:21Z,"{'action': 'opened', 'issue': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692', 'repository_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet', 'labels_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/labels{/name}', 'comments_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/comments', 'events_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/events', 'html_url': 'https://github.com/DataDog/dd-trace-dotnet/issues/2692', 'id': 1205747167, 'node_id': 'I_kwDOBhLL285H3j3f', 'number': 2692, 'title': ""Setting configuration in code doesn't seem to be honored"", 'user': {'login': 'turacma', 'id': 937441, 'node_id': 'MDQ6VXNlcjkzNzQ0MQ==', 'avatar_url': 'https://avatars.githubusercontent.com/u/937441?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/turacma', 'html_url': 'https://github.com/turacma', 'followers_url': 'https://api.github.com/users/turacma/followers', 'following_url': 'https://api.github.com/users/turacma/following{/other_user}', 'gists_url': 'https://api.github.com/users/turacma/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/turacma/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/turacma/subscriptions', 'organizations_url': 'https://api.github.com/users/turacma/orgs', 'repos_url': 'https://api.github.com/users/turacma/repos', 'events_url': 'https://api.github.com/users/turacma/events{/privacy}', 'received_events_url': 'https://api.github.com/users/turacma/received_events', 'type': 'User', 'site_admin': False}, 'labels': [], 'state': 'open', 'locked': False, 'assignee': None, 'assignees': [], 'milestone': None, 'comments': 0, 'created_at': '2022-04-15T17:33:21Z', 'updated_at': '2022-04-15T17:33:21Z', 'closed_at': None, 'author_association': 'NONE', 'active_lock_reason': None, 'body': '**Describe the bug**\r\nThe [documentation](https://docs.datadoghq.com/tracing/setup_overview/setup/dotnet-core/?tab=code#enable-the-tracer-for-your-service) suggests that configuration set in code should take precedence, but this doesn\'t seem to be true in practice. When setting configuration in code I can see 2 distinct configure lines in the tracer debug log, with the second containing the field values set in code:\r\n\r\n```\r\n2022-04-15 17:10:46.867 +00:00 [INF] DATADOG TRACER CONFIGURATION - {""date"":""2022-04-15T17:10:46.8553995+00:00"",""os_name"":""Linux"",""os_version"":""Unix 4.14.268.205"",""version"":""2.6.0.0"",""platform"":""x64"",""lang"":"".NET"",""lang_version"":""6.0.2"",""env"":null,""enabled"":true,""service"":""Eight.AppApi.RestApi"",""agent_url"":""http://172.31.77.80:8126"",""debug"":true,""health_checks_enabled"":false,""analytics_enabled"":false,""sample_rate"":null,""sampling_rules"":null,""tags"":[],""log_injection_enabled"":false,""runtime_metrics_enabled"":false,""disabled_integrations"":[],""routetemplate_resourcenames_enabled"":true,""routetemplate_expansion_enabled"":false,""partialflush_enabled"":false,""partialflush_minspans"":500,""runtime_id"":""267121e2-914b-42db-96da-286a7f3c6679"",""agent_reachable"":true,""agent_error"":"""",""appsec_enabled"":false,""appsec_trace_rate_limit"":100,""appsec_rules_file_path"":""(default)"",""appsec_libddwaf_version"":""(none)"",""direct_logs_submission_enabled_integrations"":[],""direct_logs_submission_enabled"":false,""direct_logs_submission_error"":"""",""dd_trace_methods"":""""}  { MachineName: ""."", Process: ""[17 Eight.AppApi.RestApi]"", AppDomain: ""[1 Eight.AppApi.RestApi]"", AssemblyLoadContext: ""\\""\\"" Datadog.Trace.ClrProfiler.Managed.Loader.ManagedProfilerAssemblyLoadContext #1"", TracerVersion: ""2.6.0.0"" }\r\n2022-04-15 17:10:47.063 +00:00 [INF] DATADOG TRACER CONFIGURATION - {""date"":""2022-04-15T17:10:47.0189685+00:00"",""os_name"":""Linux"",""os_version"":""Unix 4.14.268.205"",""version"":""2.4.4.0"",""platform"":""x64"",""lang"":"".NET"",""lang_version"":""6.0.2"",""env"":""staging"",""enabled"":true,""service"":""app-api"",""agent_url"":""http://172.31.77.80:8126/"",""debug"":true,""health_checks_enabled"":false,""analytics_enabled"":false,""sample_rate"":null,""sampling_rules"":null,""tags"":[],""log_injection_enabled"":false,""runtime_metrics_enabled"":false,""disabled_integrations"":[],""routetemplate_resourcenames_enabled"":true,""partialflush_enabled"":false,""partialflush_minspans"":500,""runtime_id"":""267121e2-914b-42db-96da-286a7f3c6679"",""agent_reachable"":true,""agent_error"":"""",""appsec_enabled"":false,""appsec_trace_rate_limit"":100,""appsec_rules_file_path"":""(default)"",""appsec_libddwaf_version"":""(none)"",""direct_logs_submission_enabled_integrations"":[],""direct_logs_submission_enabled"":false,""direct_logs_submission_error"":""""}  { MachineName: ""."", Process: ""[17 Eight.AppApi.RestApi]"", AppDomain: ""[1 Eight.AppApi.RestApi]"", AssemblyLoadContext: ""\\""Default\\"" System.Runtime.Loader.DefaultAssemblyLoadContext #2"", TracerVersion: ""2.4.4.0"" }\r\n```\r\n\r\nHowever, when I login and view my APM dashboard, it\'s clear only the first takes precendence (e.g. the data has no env or version tag). The only way I can reliably configure these tags is via the environment variables.\r\n\r\n**To Reproduce**\r\n1. Docker image with tracer installed as part of image, minimal env vars to start the tracer:\r\n```\r\nexport CORECLR_ENABLE_PROFILING=1\r\nexport CORECLR_PROFILER={846F5F1C-F9AE-4B07-969E-05C26BC060D8}\r\nexport CORECLR_PROFILER_PATH=/opt/datadog/Datadog.Trace.ClrProfiler.Native.so\r\nexport DD_DOTNET_TRACER_HOME=/opt/datadog\r\n```\r\n\r\n2. .NET application with code to configure settings:\r\n\r\n```\r\n            var settings = TracerSettings.FromDefaultSources();\r\n            settings.Environment = environment;\r\n            settings.ServiceName = serviceName;\r\n            settings.ServiceVersion = version;\r\n            settings.Exporter.AgentUri = new Uri($""http://{agentHost}:8126/"");\r\n            Tracer.Configure(settings);\r\n```\r\n\r\n**Expected behavior**\r\nSetting configuration in code should override env vars\r\n\r\n**Screenshots**\r\nN/A\r\n\r\n**Runtime environment (please complete the following information):**\r\n- Instrumentation mode: Installation on container \r\n```\r\nRUN mkdir -p /opt/datadog \\\r\n    && mkdir -p /var/log/datadog \\\r\n    && TRACER_VERSION=$(curl -s https://api.github.com/repos/DataDog/dd-trace-dotnet/releases/latest | grep tag_name | cut -d \'""\' -f 4 | cut -c2-) \\\r\n    && curl -LO https://github.com/DataDog/dd-trace-dotnet/releases/download/v${TRACER_VERSION}/datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb \\\r\n    && dpkg -i ./datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb \\\r\n    && rm ./datadog-dotnet-apm_${TRACER_VERSION}_amd64.deb\r\n```\r\n\r\n- Tracer version: 2.4.4.0\r\n- OS: Ubuntu docker container running on an AL2 EC2 instance \r\n- CLR: 2.4.4.0 with .NET 6.x\r\n\r\n<!--\r\nNOTE: To contact our support team, see https://www.datadoghq.com/support/\r\nWhen contacting support, please include the information requested above.\r\nIf possible, also include the tracer log files found (by default) in:\r\nWindows: %ProgramData%\\Datadog .NET Tracer\\logs\\\r\nLinux: /var/log/datadog/dotnet/\r\n--!>\r\n', 'reactions': {'url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/DataDog/dd-trace-dotnet/issues/2692/timeline', 'performed_via_github_app': None}}",opened,C#
