event_id,event_type,event_repository,code_sample_event,event_created_at,event_payload,event_action,language
20309840102,IssueCommentEvent,hyperledger/fabric-sdk-node,0.0,2022-02-17T12:45:00Z,"{'action': 'created', 'issue': {'url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/529', 'repository_url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node', 'labels_url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/529/labels{/name}', 'comments_url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/529/comments', 'events_url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/529/events', 'html_url': 'https://github.com/hyperledger/fabric-sdk-node/issues/529', 'id': 1053280468, 'node_id': 'I_kwDOBA4IDM4-x8jU', 'number': 529, 'title': 'Memory leak when gateway.connect and gateway.disconnect are called repeatedly', 'user': {'login': 'Ryu-Shinzaki', 'id': 79957867, 'node_id': 'MDQ6VXNlcjc5OTU3ODY3', 'avatar_url': 'https://avatars.githubusercontent.com/u/79957867?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/Ryu-Shinzaki', 'html_url': 'https://github.com/Ryu-Shinzaki', 'followers_url': 'https://api.github.com/users/Ryu-Shinzaki/followers', 'following_url': 'https://api.github.com/users/Ryu-Shinzaki/following{/other_user}', 'gists_url': 'https://api.github.com/users/Ryu-Shinzaki/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/Ryu-Shinzaki/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/Ryu-Shinzaki/subscriptions', 'organizations_url': 'https://api.github.com/users/Ryu-Shinzaki/orgs', 'repos_url': 'https://api.github.com/users/Ryu-Shinzaki/repos', 'events_url': 'https://api.github.com/users/Ryu-Shinzaki/events{/privacy}', 'received_events_url': 'https://api.github.com/users/Ryu-Shinzaki/received_events', 'type': 'User', 'site_admin': False}, 'labels': [{'id': 441244964, 'node_id': 'MDU6TGFiZWw0NDEyNDQ5NjQ=', 'url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/labels/help%20wanted', 'name': 'help wanted', 'color': '128A0C', 'default': True, 'description': None}], 'state': 'open', 'locked': False, 'assignee': None, 'assignees': [], 'milestone': None, 'comments': 4, 'created_at': '2021-11-15T06:55:49Z', 'updated_at': '2022-02-17T12:44:59Z', 'closed_at': None, 'author_association': 'NONE', 'active_lock_reason': None, 'body': 'We found memory-leak behavior when we call gateway.connect and gateway.disconnect repeatedly,\r\nthough we expected that gateway.disconnect cleans up.\r\n\r\nWe tried executing the code attached to this issue on the following environments.\r\n- CentOS Linux release 7.9.2009 (Core)\r\n- curl 7.79.1\r\n- node v14.17.5\r\n- npm v7.11.2\r\n- fabric-sdk-node v2.2.10\r\n- fabric-samples v2.2.3\r\n\r\nThen, we got logs as follows:\r\n\r\n```\r\ninitial state\r\nrss [B], heapTotal [B], heapUsed [B], external [B], arrayBuffers [B]\r\n65703936, 54411264, 17494312, 1593216, 125449\r\ninitializing network instance\r\nCreating an gateway object\r\n65773568, 54935552, 17339072, 1584432, 85154\r\nExecuting connect function\r\n65773568, 54935552, 17365152, 1584576, 78976\r\nExecuting disconnect function\r\n65773568, 54935552, 17366976, 1584576, 78976\r\n\r\n... (repeated some times)\r\n\r\nExecuting connect function\r\n89698304, 56246272, 19282304, 1769693, 262115\r\nExecuting disconnect function\r\n89698304, 56246272, 19181592, 1769549, 251008\r\n\r\n... (memory usage increases)\r\n\r\n```\r\n\r\nAccording to these logs,\r\nthe memory usage increases every time we call connect and disconnect functions.\r\n\r\nWe attached the code to this issue for reproduction.\r\n[sdk-sample.tar.gz](https://github.com/hyperledger/fabric-sdk-node/files/7536392/sdk-sample.tar.gz)', 'reactions': {'url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/529/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/529/timeline', 'performed_via_github_app': None}, 'comment': {'url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/comments/1042912718', 'html_url': 'https://github.com/hyperledger/fabric-sdk-node/issues/529#issuecomment-1042912718', 'issue_url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/529', 'id': 1042912718, 'node_id': 'IC_kwDOBA4IDM4-KZXO', 'user': {'login': 'VaanPan', 'id': 12791293, 'node_id': 'MDQ6VXNlcjEyNzkxMjkz', 'avatar_url': 'https://avatars.githubusercontent.com/u/12791293?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/VaanPan', 'html_url': 'https://github.com/VaanPan', 'followers_url': 'https://api.github.com/users/VaanPan/followers', 'following_url': 'https://api.github.com/users/VaanPan/following{/other_user}', 'gists_url': 'https://api.github.com/users/VaanPan/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/VaanPan/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/VaanPan/subscriptions', 'organizations_url': 'https://api.github.com/users/VaanPan/orgs', 'repos_url': 'https://api.github.com/users/VaanPan/repos', 'events_url': 'https://api.github.com/users/VaanPan/events{/privacy}', 'received_events_url': 'https://api.github.com/users/VaanPan/received_events', 'type': 'User', 'site_admin': False}, 'created_at': '2022-02-17T12:44:59Z', 'updated_at': '2022-02-17T12:44:59Z', 'author_association': 'NONE', 'body': 'We notice the same issue here. In our project we create gateway-> connect -> disconnect. The memory keeps leakage and if we stop client process, client and peer memory suddenly released.', 'reactions': {'url': 'https://api.github.com/repos/hyperledger/fabric-sdk-node/issues/comments/1042912718/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'performed_via_github_app': None}}",created,JavaScript
