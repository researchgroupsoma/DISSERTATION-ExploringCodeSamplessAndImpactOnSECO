event_id,event_type,event_repository,code_sample_event,event_created_at,event_payload,event_action,language
20255626039,PullRequestEvent,redis/redis-py,0.0,2022-02-14T22:49:21Z,"{'action': 'opened', 'number': 1985, 'pull_request': {'url': 'https://api.github.com/repos/redis/redis-py/pulls/1985', 'id': 852608640, 'node_id': 'PR_kwDOAAWKjs4y0caA', 'html_url': 'https://github.com/redis/redis-py/pull/1985', 'diff_url': 'https://github.com/redis/redis-py/pull/1985.diff', 'patch_url': 'https://github.com/redis/redis-py/pull/1985.patch', 'issue_url': 'https://api.github.com/repos/redis/redis-py/issues/1985', 'number': 1985, 'state': 'open', 'locked': False, 'title': 'Reuse CommandsParser from RedisCluster in ClusterPipeline', 'user': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'body': '### Pull Request check-list\r\n\r\n_Please make sure to review and check all of these items:_\r\n\r\n- [ ] Does `$ tox` pass with this change (including linting)?\r\n- [ ] Do the CI tests pass with this change (enable it first in your forked repo and wait for the github action build to finish)?\r\n- [ ] Is the new or changed code fully tested?\r\n- [ ] Is a documentation update included (if this change modifies existing APIs, or introduces new ones)?\r\n- [ ] Is there an example added to the examples folder (if applicable)?\r\n\r\n_NOTE: these things are not required to open a PR and can be done\r\nafterwards / while the PR is open._\r\n\r\n### Description of change\r\n\r\nThis PR addresses the issue https://github.com/redis/redis-py/issues/1932.  \r\nThe current implementation creates a new instance of `CommandsParser` for every `ClusterPipeline` instance. It may get expensive because `CommandsParser` executes `COMMAND` command during the initialization. I assume that pipelines can reuse the parser instance from `RedisCluster` instead.', 'created_at': '2022-02-14T22:49:21Z', 'updated_at': '2022-02-14T22:49:21Z', 'closed_at': None, 'merged_at': None, 'merge_commit_sha': None, 'assignee': None, 'assignees': [], 'requested_reviewers': [], 'requested_teams': [], 'labels': [], 'milestone': None, 'draft': False, 'commits_url': 'https://api.github.com/repos/redis/redis-py/pulls/1985/commits', 'review_comments_url': 'https://api.github.com/repos/redis/redis-py/pulls/1985/comments', 'review_comment_url': 'https://api.github.com/repos/redis/redis-py/pulls/comments{/number}', 'comments_url': 'https://api.github.com/repos/redis/redis-py/issues/1985/comments', 'statuses_url': 'https://api.github.com/repos/redis/redis-py/statuses/a4ed092ae1f6b5bd79b7bca3071e14e251ac64ab', 'head': {'label': 'shchurov:mshch/reuse-commands-parser', 'ref': 'mshch/reuse-commands-parser', 'sha': 'a4ed092ae1f6b5bd79b7bca3071e14e251ac64ab', 'user': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'repo': {'id': 459332648, 'node_id': 'R_kgDOG2DcKA', 'name': 'redis-py', 'full_name': 'shchurov/redis-py', 'private': False, 'owner': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'html_url': 'https://github.com/shchurov/redis-py', 'description': 'Redis Python Client', 'fork': True, 'url': 'https://api.github.com/repos/shchurov/redis-py', 'forks_url': 'https://api.github.com/repos/shchurov/redis-py/forks', 'keys_url': 'https://api.github.com/repos/shchurov/redis-py/keys{/key_id}', 'collaborators_url': 'https://api.github.com/repos/shchurov/redis-py/collaborators{/collaborator}', 'teams_url': 'https://api.github.com/repos/shchurov/redis-py/teams', 'hooks_url': 'https://api.github.com/repos/shchurov/redis-py/hooks', 'issue_events_url': 'https://api.github.com/repos/shchurov/redis-py/issues/events{/number}', 'events_url': 'https://api.github.com/repos/shchurov/redis-py/events', 'assignees_url': 'https://api.github.com/repos/shchurov/redis-py/assignees{/user}', 'branches_url': 'https://api.github.com/repos/shchurov/redis-py/branches{/branch}', 'tags_url': 'https://api.github.com/repos/shchurov/redis-py/tags', 'blobs_url': 'https://api.github.com/repos/shchurov/redis-py/git/blobs{/sha}', 'git_tags_url': 'https://api.github.com/repos/shchurov/redis-py/git/tags{/sha}', 'git_refs_url': 'https://api.github.com/repos/shchurov/redis-py/git/refs{/sha}', 'trees_url': 'https://api.github.com/repos/shchurov/redis-py/git/trees{/sha}', 'statuses_url': 'https://api.github.com/repos/shchurov/redis-py/statuses/{sha}', 'languages_url': 'https://api.github.com/repos/shchurov/redis-py/languages', 'stargazers_url': 'https://api.github.com/repos/shchurov/redis-py/stargazers', 'contributors_url': 'https://api.github.com/repos/shchurov/redis-py/contributors', 'subscribers_url': 'https://api.github.com/repos/shchurov/redis-py/subscribers', 'subscription_url': 'https://api.github.com/repos/shchurov/redis-py/subscription', 'commits_url': 'https://api.github.com/repos/shchurov/redis-py/commits{/sha}', 'git_commits_url': 'https://api.github.com/repos/shchurov/redis-py/git/commits{/sha}', 'comments_url': 'https://api.github.com/repos/shchurov/redis-py/comments{/number}', 'issue_comment_url': 'https://api.github.com/repos/shchurov/redis-py/issues/comments{/number}', 'contents_url': 'https://api.github.com/repos/shchurov/redis-py/contents/{+path}', 'compare_url': 'https://api.github.com/repos/shchurov/redis-py/compare/{base}...{head}', 'merges_url': 'https://api.github.com/repos/shchurov/redis-py/merges', 'archive_url': 'https://api.github.com/repos/shchurov/redis-py/{archive_format}{/ref}', 'downloads_url': 'https://api.github.com/repos/shchurov/redis-py/downloads', 'issues_url': 'https://api.github.com/repos/shchurov/redis-py/issues{/number}', 'pulls_url': 'https://api.github.com/repos/shchurov/redis-py/pulls{/number}', 'milestones_url': 'https://api.github.com/repos/shchurov/redis-py/milestones{/number}', 'notifications_url': 'https://api.github.com/repos/shchurov/redis-py/notifications{?since,all,participating}', 'labels_url': 'https://api.github.com/repos/shchurov/redis-py/labels{/name}', 'releases_url': 'https://api.github.com/repos/shchurov/redis-py/releases{/id}', 'deployments_url': 'https://api.github.com/repos/shchurov/redis-py/deployments', 'created_at': '2022-02-14T21:33:35Z', 'updated_at': '2022-02-14T22:07:01Z', 'pushed_at': '2022-02-14T22:20:16Z', 'git_url': 'git://github.com/shchurov/redis-py.git', 'ssh_url': 'git@github.com:shchurov/redis-py.git', 'clone_url': 'https://github.com/shchurov/redis-py.git', 'svn_url': 'https://github.com/shchurov/redis-py', 'homepage': '', 'size': 5663, 'stargazers_count': 0, 'watchers_count': 0, 'language': 'Python', 'has_issues': False, 'has_projects': True, 'has_downloads': True, 'has_wiki': False, 'has_pages': False, 'forks_count': 0, 'mirror_url': None, 'archived': False, 'disabled': False, 'open_issues_count': 0, 'license': {'key': 'mit', 'name': 'MIT License', 'spdx_id': 'MIT', 'url': 'https://api.github.com/licenses/mit', 'node_id': 'MDc6TGljZW5zZTEz'}, 'allow_forking': True, 'is_template': False, 'topics': [], 'visibility': 'public', 'forks': 0, 'open_issues': 0, 'watchers': 0, 'default_branch': 'master'}}, 'base': {'label': 'redis:master', 'ref': 'master', 'sha': 'aafa7f1ba150afb6d003e813386895e7ca08db6d', 'user': {'login': 'redis', 'id': 1529926, 'node_id': 'MDEyOk9yZ2FuaXphdGlvbjE1Mjk5MjY=', 'avatar_url': 'https://avatars.githubusercontent.com/u/1529926?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/redis', 'html_url': 'https://github.com/redis', 'followers_url': 'https://api.github.com/users/redis/followers', 'following_url': 'https://api.github.com/users/redis/following{/other_user}', 'gists_url': 'https://api.github.com/users/redis/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/redis/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/redis/subscriptions', 'organizations_url': 'https://api.github.com/users/redis/orgs', 'repos_url': 'https://api.github.com/users/redis/repos', 'events_url': 'https://api.github.com/users/redis/events{/privacy}', 'received_events_url': 'https://api.github.com/users/redis/received_events', 'type': 'Organization', 'site_admin': False}, 'repo': {'id': 363150, 'node_id': 'MDEwOlJlcG9zaXRvcnkzNjMxNTA=', 'name': 'redis-py', 'full_name': 'redis/redis-py', 'private': False, 'owner': {'login': 'redis', 'id': 1529926, 'node_id': 'MDEyOk9yZ2FuaXphdGlvbjE1Mjk5MjY=', 'avatar_url': 'https://avatars.githubusercontent.com/u/1529926?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/redis', 'html_url': 'https://github.com/redis', 'followers_url': 'https://api.github.com/users/redis/followers', 'following_url': 'https://api.github.com/users/redis/following{/other_user}', 'gists_url': 'https://api.github.com/users/redis/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/redis/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/redis/subscriptions', 'organizations_url': 'https://api.github.com/users/redis/orgs', 'repos_url': 'https://api.github.com/users/redis/repos', 'events_url': 'https://api.github.com/users/redis/events{/privacy}', 'received_events_url': 'https://api.github.com/users/redis/received_events', 'type': 'Organization', 'site_admin': False}, 'html_url': 'https://github.com/redis/redis-py', 'description': 'Redis Python Client', 'fork': False, 'url': 'https://api.github.com/repos/redis/redis-py', 'forks_url': 'https://api.github.com/repos/redis/redis-py/forks', 'keys_url': 'https://api.github.com/repos/redis/redis-py/keys{/key_id}', 'collaborators_url': 'https://api.github.com/repos/redis/redis-py/collaborators{/collaborator}', 'teams_url': 'https://api.github.com/repos/redis/redis-py/teams', 'hooks_url': 'https://api.github.com/repos/redis/redis-py/hooks', 'issue_events_url': 'https://api.github.com/repos/redis/redis-py/issues/events{/number}', 'events_url': 'https://api.github.com/repos/redis/redis-py/events', 'assignees_url': 'https://api.github.com/repos/redis/redis-py/assignees{/user}', 'branches_url': 'https://api.github.com/repos/redis/redis-py/branches{/branch}', 'tags_url': 'https://api.github.com/repos/redis/redis-py/tags', 'blobs_url': 'https://api.github.com/repos/redis/redis-py/git/blobs{/sha}', 'git_tags_url': 'https://api.github.com/repos/redis/redis-py/git/tags{/sha}', 'git_refs_url': 'https://api.github.com/repos/redis/redis-py/git/refs{/sha}', 'trees_url': 'https://api.github.com/repos/redis/redis-py/git/trees{/sha}', 'statuses_url': 'https://api.github.com/repos/redis/redis-py/statuses/{sha}', 'languages_url': 'https://api.github.com/repos/redis/redis-py/languages', 'stargazers_url': 'https://api.github.com/repos/redis/redis-py/stargazers', 'contributors_url': 'https://api.github.com/repos/redis/redis-py/contributors', 'subscribers_url': 'https://api.github.com/repos/redis/redis-py/subscribers', 'subscription_url': 'https://api.github.com/repos/redis/redis-py/subscription', 'commits_url': 'https://api.github.com/repos/redis/redis-py/commits{/sha}', 'git_commits_url': 'https://api.github.com/repos/redis/redis-py/git/commits{/sha}', 'comments_url': 'https://api.github.com/repos/redis/redis-py/comments{/number}', 'issue_comment_url': 'https://api.github.com/repos/redis/redis-py/issues/comments{/number}', 'contents_url': 'https://api.github.com/repos/redis/redis-py/contents/{+path}', 'compare_url': 'https://api.github.com/repos/redis/redis-py/compare/{base}...{head}', 'merges_url': 'https://api.github.com/repos/redis/redis-py/merges', 'archive_url': 'https://api.github.com/repos/redis/redis-py/{archive_format}{/ref}', 'downloads_url': 'https://api.github.com/repos/redis/redis-py/downloads', 'issues_url': 'https://api.github.com/repos/redis/redis-py/issues{/number}', 'pulls_url': 'https://api.github.com/repos/redis/redis-py/pulls{/number}', 'milestones_url': 'https://api.github.com/repos/redis/redis-py/milestones{/number}', 'notifications_url': 'https://api.github.com/repos/redis/redis-py/notifications{?since,all,participating}', 'labels_url': 'https://api.github.com/repos/redis/redis-py/labels{/name}', 'releases_url': 'https://api.github.com/repos/redis/redis-py/releases{/id}', 'deployments_url': 'https://api.github.com/repos/redis/redis-py/deployments', 'created_at': '2009-11-06T10:22:26Z', 'updated_at': '2022-02-14T16:50:13Z', 'pushed_at': '2022-02-14T22:49:21Z', 'git_url': 'git://github.com/redis/redis-py.git', 'ssh_url': 'git@github.com:redis/redis-py.git', 'clone_url': 'https://github.com/redis/redis-py.git', 'svn_url': 'https://github.com/redis/redis-py', 'homepage': '', 'size': 5663, 'stargazers_count': 10017, 'watchers_count': 10017, 'language': 'Python', 'has_issues': True, 'has_projects': True, 'has_downloads': True, 'has_wiki': False, 'has_pages': False, 'forks_count': 2099, 'mirror_url': None, 'archived': False, 'disabled': False, 'open_issues_count': 129, 'license': {'key': 'mit', 'name': 'MIT License', 'spdx_id': 'MIT', 'url': 'https://api.github.com/licenses/mit', 'node_id': 'MDc6TGljZW5zZTEz'}, 'allow_forking': True, 'is_template': False, 'topics': [], 'visibility': 'public', 'forks': 2099, 'open_issues': 129, 'watchers': 10017, 'default_branch': 'master'}}, '_links': {'self': {'href': 'https://api.github.com/repos/redis/redis-py/pulls/1985'}, 'html': {'href': 'https://github.com/redis/redis-py/pull/1985'}, 'issue': {'href': 'https://api.github.com/repos/redis/redis-py/issues/1985'}, 'comments': {'href': 'https://api.github.com/repos/redis/redis-py/issues/1985/comments'}, 'review_comments': {'href': 'https://api.github.com/repos/redis/redis-py/pulls/1985/comments'}, 'review_comment': {'href': 'https://api.github.com/repos/redis/redis-py/pulls/comments{/number}'}, 'commits': {'href': 'https://api.github.com/repos/redis/redis-py/pulls/1985/commits'}, 'statuses': {'href': 'https://api.github.com/repos/redis/redis-py/statuses/a4ed092ae1f6b5bd79b7bca3071e14e251ac64ab'}}, 'author_association': 'NONE', 'auto_merge': None, 'active_lock_reason': None, 'merged': False, 'mergeable': None, 'rebaseable': None, 'mergeable_state': 'unknown', 'merged_by': None, 'comments': 0, 'review_comments': 0, 'maintainer_can_modify': True, 'commits': 1, 'additions': 3, 'deletions': 5, 'changed_files': 1}}",opened,Python
20255255172,CreateEvent,shchurov/redis-py,0.0,2022-02-14T22:20:19Z,"{'ref': 'mshch/reuse-commands-parser', 'ref_type': 'branch', 'master_branch': 'master', 'description': 'Redis Python Client', 'pusher_type': 'user'}",,Python
20255211135,DeleteEvent,shchurov/redis-py,0.0,2022-02-14T22:17:10Z,"{'ref': 'mshch/reuse-commands-parser', 'ref_type': 'branch', 'pusher_type': 'user'}",,Python
20255069288,PushEvent,shchurov/redis-py,0.0,2022-02-14T22:07:29Z,"{'push_id': 9101628896, 'size': 1, 'distinct_size': 1, 'ref': 'refs/heads/master', 'head': '2ff46abc05aea4eab3779cb64b733e280390c2e7', 'before': 'b9832977fcfcb00b400b117d3e620604db518927', 'commits': [{'sha': '2ff46abc05aea4eab3779cb64b733e280390c2e7', 'author': {'email': 'mykhailo.shchurov@wolt.com', 'name': 'Mykhailo Shchurov'}, 'message': 'test', 'distinct': True, 'url': 'https://api.github.com/repos/shchurov/redis-py/commits/2ff46abc05aea4eab3779cb64b733e280390c2e7'}]}",,Python
20255061545,PushEvent,shchurov/redis-py,0.0,2022-02-14T22:06:58Z,"{'push_id': 9101625205, 'size': 1, 'distinct_size': 1, 'ref': 'refs/heads/master', 'head': 'b9832977fcfcb00b400b117d3e620604db518927', 'before': 'aafa7f1ba150afb6d003e813386895e7ca08db6d', 'commits': [{'sha': 'b9832977fcfcb00b400b117d3e620604db518927', 'author': {'email': 'mykhailo.shchurov@wolt.com', 'name': 'Mykhailo Shchurov'}, 'message': 'test', 'distinct': True, 'url': 'https://api.github.com/repos/shchurov/redis-py/commits/b9832977fcfcb00b400b117d3e620604db518927'}]}",,Python
20255004012,CreateEvent,shchurov/redis-py,0.0,2022-02-14T22:03:10Z,"{'ref': 'mshch/reuse-commands-parser', 'ref_type': 'branch', 'master_branch': 'master', 'description': 'Redis Python Client', 'pusher_type': 'user'}",,Python
20254571326,ForkEvent,redis/redis-py,0.0,2022-02-14T21:33:36Z,"{'forkee': {'id': 459332648, 'node_id': 'R_kgDOG2DcKA', 'name': 'redis-py', 'full_name': 'shchurov/redis-py', 'private': False, 'owner': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'html_url': 'https://github.com/shchurov/redis-py', 'description': 'Redis Python Client', 'fork': True, 'url': 'https://api.github.com/repos/shchurov/redis-py', 'forks_url': 'https://api.github.com/repos/shchurov/redis-py/forks', 'keys_url': 'https://api.github.com/repos/shchurov/redis-py/keys{/key_id}', 'collaborators_url': 'https://api.github.com/repos/shchurov/redis-py/collaborators{/collaborator}', 'teams_url': 'https://api.github.com/repos/shchurov/redis-py/teams', 'hooks_url': 'https://api.github.com/repos/shchurov/redis-py/hooks', 'issue_events_url': 'https://api.github.com/repos/shchurov/redis-py/issues/events{/number}', 'events_url': 'https://api.github.com/repos/shchurov/redis-py/events', 'assignees_url': 'https://api.github.com/repos/shchurov/redis-py/assignees{/user}', 'branches_url': 'https://api.github.com/repos/shchurov/redis-py/branches{/branch}', 'tags_url': 'https://api.github.com/repos/shchurov/redis-py/tags', 'blobs_url': 'https://api.github.com/repos/shchurov/redis-py/git/blobs{/sha}', 'git_tags_url': 'https://api.github.com/repos/shchurov/redis-py/git/tags{/sha}', 'git_refs_url': 'https://api.github.com/repos/shchurov/redis-py/git/refs{/sha}', 'trees_url': 'https://api.github.com/repos/shchurov/redis-py/git/trees{/sha}', 'statuses_url': 'https://api.github.com/repos/shchurov/redis-py/statuses/{sha}', 'languages_url': 'https://api.github.com/repos/shchurov/redis-py/languages', 'stargazers_url': 'https://api.github.com/repos/shchurov/redis-py/stargazers', 'contributors_url': 'https://api.github.com/repos/shchurov/redis-py/contributors', 'subscribers_url': 'https://api.github.com/repos/shchurov/redis-py/subscribers', 'subscription_url': 'https://api.github.com/repos/shchurov/redis-py/subscription', 'commits_url': 'https://api.github.com/repos/shchurov/redis-py/commits{/sha}', 'git_commits_url': 'https://api.github.com/repos/shchurov/redis-py/git/commits{/sha}', 'comments_url': 'https://api.github.com/repos/shchurov/redis-py/comments{/number}', 'issue_comment_url': 'https://api.github.com/repos/shchurov/redis-py/issues/comments{/number}', 'contents_url': 'https://api.github.com/repos/shchurov/redis-py/contents/{+path}', 'compare_url': 'https://api.github.com/repos/shchurov/redis-py/compare/{base}...{head}', 'merges_url': 'https://api.github.com/repos/shchurov/redis-py/merges', 'archive_url': 'https://api.github.com/repos/shchurov/redis-py/{archive_format}{/ref}', 'downloads_url': 'https://api.github.com/repos/shchurov/redis-py/downloads', 'issues_url': 'https://api.github.com/repos/shchurov/redis-py/issues{/number}', 'pulls_url': 'https://api.github.com/repos/shchurov/redis-py/pulls{/number}', 'milestones_url': 'https://api.github.com/repos/shchurov/redis-py/milestones{/number}', 'notifications_url': 'https://api.github.com/repos/shchurov/redis-py/notifications{?since,all,participating}', 'labels_url': 'https://api.github.com/repos/shchurov/redis-py/labels{/name}', 'releases_url': 'https://api.github.com/repos/shchurov/redis-py/releases{/id}', 'deployments_url': 'https://api.github.com/repos/shchurov/redis-py/deployments', 'created_at': '2022-02-14T21:33:35Z', 'updated_at': '2022-02-14T16:50:13Z', 'pushed_at': '2022-02-14T20:23:26Z', 'git_url': 'git://github.com/shchurov/redis-py.git', 'ssh_url': 'git@github.com:shchurov/redis-py.git', 'clone_url': 'https://github.com/shchurov/redis-py.git', 'svn_url': 'https://github.com/shchurov/redis-py', 'homepage': '', 'size': 5663, 'stargazers_count': 0, 'watchers_count': 0, 'language': None, 'has_issues': False, 'has_projects': True, 'has_downloads': True, 'has_wiki': False, 'has_pages': False, 'forks_count': 0, 'mirror_url': None, 'archived': False, 'disabled': False, 'open_issues_count': 0, 'license': {'key': 'mit', 'name': 'MIT License', 'spdx_id': 'MIT', 'url': 'https://api.github.com/licenses/mit', 'node_id': 'MDc6TGljZW5zZTEz'}, 'allow_forking': True, 'is_template': False, 'topics': [], 'visibility': 'public', 'forks': 0, 'open_issues': 0, 'watchers': 0, 'default_branch': 'main', 'public': True}}",,Python
20172724710,IssueCommentEvent,redis/redis-py,0.0,2022-02-10T11:54:53Z,"{'action': 'created', 'issue': {'url': 'https://api.github.com/repos/redis/redis-py/issues/1932', 'repository_url': 'https://api.github.com/repos/redis/redis-py', 'labels_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/labels{/name}', 'comments_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/comments', 'events_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/events', 'html_url': 'https://github.com/redis/redis-py/issues/1932', 'id': 1129004365, 'node_id': 'I_kwDOAAWKjs5DSz1N', 'number': 1932, 'title': 'Elevated CPU utilization on one node when using RedisCluster pipeline', 'user': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'labels': [], 'state': 'open', 'locked': False, 'assignee': None, 'assignees': [], 'milestone': None, 'comments': 2, 'created_at': '2022-02-09T20:45:46Z', 'updated_at': '2022-02-10T11:54:53Z', 'closed_at': None, 'author_association': 'NONE', 'active_lock_reason': None, 'body': '**Version**:  4.1.3\r\n\r\n**Platform**: Python 3.9 on python:3.9-bullseye image in AWS\r\n\r\n**Description**:\r\nWe have a cluster in AWS that consists of 3 shards with 3 nodes in each. We serve its data to our users. A typical query contains a few hundred keys. The cluster receives much more reads than writes. \r\nFor some reason, the CPU usage on node 1-1 is significantly higher than on the others. This issue limits our ability to scale horizontally.\r\n\r\nHere is the structure of our code:\r\n```\r\nredis_client = RedisCluster.from_url(\r\n  config.redis_url,\r\n  socket_timeout=config.redis_timeout,\r\n  socket_connect_timeout=config.redis_connect_timeout,\r\n  read_from_replicas=True,\r\n)\r\n...\r\ndef get_data():\r\n  with redis_client.pipeline() as pipe:\r\n    for key in keys:\r\n      pipe.get(key)\r\n    return pipe.execute()\r\n```\r\n\r\nThis graph shows CPU utilization on the nodes:\r\n<img width=""1426"" alt=""image"" src=""https://user-images.githubusercontent.com/5001455/153285384-24a989ef-b411-4886-a83a-ec55d553b67d.png"">\r\n\r\nThis graph shows the number of GET commands received by the nodes:\r\n<img width=""1422"" alt=""image"" src=""https://user-images.githubusercontent.com/5001455/153286052-09b72e55-d465-4903-8346-a5a9680bf5a3.png"">\r\n\r\n', 'reactions': {'url': 'https://api.github.com/repos/redis/redis-py/issues/1932/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/timeline', 'performed_via_github_app': None}, 'comment': {'url': 'https://api.github.com/repos/redis/redis-py/issues/comments/1034833797', 'html_url': 'https://github.com/redis/redis-py/issues/1932#issuecomment-1034833797', 'issue_url': 'https://api.github.com/repos/redis/redis-py/issues/1932', 'id': 1034833797, 'node_id': 'IC_kwDOAAWKjs49rk-F', 'user': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'created_at': '2022-02-10T11:54:53Z', 'updated_at': '2022-02-10T11:54:53Z', 'author_association': 'NONE', 'body': 'We came down to this code that significantly increases the CPU load on Node 1-1:\r\n```\r\nwhile True:\r\n  r.pipeline()\r\n```', 'reactions': {'url': 'https://api.github.com/repos/redis/redis-py/issues/comments/1034833797/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'performed_via_github_app': None}}",created,Python
20171253716,IssueCommentEvent,redis/redis-py,0.0,2022-02-10T10:36:57Z,"{'action': 'created', 'issue': {'url': 'https://api.github.com/repos/redis/redis-py/issues/1932', 'repository_url': 'https://api.github.com/repos/redis/redis-py', 'labels_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/labels{/name}', 'comments_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/comments', 'events_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/events', 'html_url': 'https://github.com/redis/redis-py/issues/1932', 'id': 1129004365, 'node_id': 'I_kwDOAAWKjs5DSz1N', 'number': 1932, 'title': 'Elevated CPU utilization on one node when using RedisCluster pipeline', 'user': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'labels': [], 'state': 'open', 'locked': False, 'assignee': None, 'assignees': [], 'milestone': None, 'comments': 0, 'created_at': '2022-02-09T20:45:46Z', 'updated_at': '2022-02-10T10:36:56Z', 'closed_at': None, 'author_association': 'NONE', 'active_lock_reason': None, 'body': '**Version**:  4.1.3\r\n\r\n**Platform**: Python 3.9 on python:3.9-bullseye image in AWS\r\n\r\n**Description**:\r\nWe have a cluster in AWS that consists of 3 shards with 3 nodes in each. We serve its data to our users. A typical query contains a few hundred keys. The cluster receives much more reads than writes. \r\nFor some reason, the CPU usage on node 1-1 is significantly higher than on the others. This issue limits our ability to scale horizontally.\r\n\r\nHere is the structure of our code:\r\n```\r\nredis_client = RedisCluster.from_url(\r\n  config.redis_url,\r\n  socket_timeout=config.redis_timeout,\r\n  socket_connect_timeout=config.redis_connect_timeout,\r\n  read_from_replicas=True,\r\n)\r\n...\r\ndef get_data():\r\n  with redis_client.pipeline() as pipe:\r\n    for key in keys:\r\n      pipe.get(key)\r\n    return pipe.execute()\r\n```\r\n\r\nThis graph shows CPU utilization on the nodes:\r\n<img width=""1426"" alt=""image"" src=""https://user-images.githubusercontent.com/5001455/153285384-24a989ef-b411-4886-a83a-ec55d553b67d.png"">\r\n\r\nThis graph shows the number of GET commands received by the nodes:\r\n<img width=""1422"" alt=""image"" src=""https://user-images.githubusercontent.com/5001455/153286052-09b72e55-d465-4903-8346-a5a9680bf5a3.png"">\r\n\r\n', 'reactions': {'url': 'https://api.github.com/repos/redis/redis-py/issues/1932/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/timeline', 'performed_via_github_app': None}, 'comment': {'url': 'https://api.github.com/repos/redis/redis-py/issues/comments/1034757826', 'html_url': 'https://github.com/redis/redis-py/issues/1932#issuecomment-1034757826', 'issue_url': 'https://api.github.com/repos/redis/redis-py/issues/1932', 'id': 1034757826, 'node_id': 'IC_kwDOAAWKjs49rSbC', 'user': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'created_at': '2022-02-10T10:36:56Z', 'updated_at': '2022-02-10T10:36:56Z', 'author_association': 'NONE', 'body': 'We managed to narrow down the issue.\r\nThis code leads to the same behavior:\r\n```\r\nwhile True:\r\n  with redis_client.pipeline() as pipe: # new pipeline for each iteration\r\n    for key in keys:\r\n      pipe.get(key)\r\n    pipe.execute()\r\n```\r\n\r\nThis code distributes the CPU load evenly:\r\n```\r\npipe = r.pipeline()  # one pipeline for the process\r\nwhile True:\r\n  for key in keys:\r\n    pipe.get(key)\r\n  pipe.execute()\r\n```\r\n\r\nUnfortunately, using the second approach in production will result in a bottleneck.', 'reactions': {'url': 'https://api.github.com/repos/redis/redis-py/issues/comments/1034757826/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'performed_via_github_app': None}}",created,Python
20160315376,IssuesEvent,redis/redis-py,0.0,2022-02-09T20:45:46Z,"{'action': 'opened', 'issue': {'url': 'https://api.github.com/repos/redis/redis-py/issues/1932', 'repository_url': 'https://api.github.com/repos/redis/redis-py', 'labels_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/labels{/name}', 'comments_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/comments', 'events_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/events', 'html_url': 'https://github.com/redis/redis-py/issues/1932', 'id': 1129004365, 'node_id': 'I_kwDOAAWKjs5DSz1N', 'number': 1932, 'title': 'Elevated CPU utilization on one node when using RedisCluster pipeline', 'user': {'login': 'shchurov', 'id': 5001455, 'node_id': 'MDQ6VXNlcjUwMDE0NTU=', 'avatar_url': 'https://avatars.githubusercontent.com/u/5001455?v=4', 'gravatar_id': '', 'url': 'https://api.github.com/users/shchurov', 'html_url': 'https://github.com/shchurov', 'followers_url': 'https://api.github.com/users/shchurov/followers', 'following_url': 'https://api.github.com/users/shchurov/following{/other_user}', 'gists_url': 'https://api.github.com/users/shchurov/gists{/gist_id}', 'starred_url': 'https://api.github.com/users/shchurov/starred{/owner}{/repo}', 'subscriptions_url': 'https://api.github.com/users/shchurov/subscriptions', 'organizations_url': 'https://api.github.com/users/shchurov/orgs', 'repos_url': 'https://api.github.com/users/shchurov/repos', 'events_url': 'https://api.github.com/users/shchurov/events{/privacy}', 'received_events_url': 'https://api.github.com/users/shchurov/received_events', 'type': 'User', 'site_admin': False}, 'labels': [], 'state': 'open', 'locked': False, 'assignee': None, 'assignees': [], 'milestone': None, 'comments': 0, 'created_at': '2022-02-09T20:45:46Z', 'updated_at': '2022-02-09T20:45:46Z', 'closed_at': None, 'author_association': 'NONE', 'active_lock_reason': None, 'body': '**Version**:  4.1.3\r\n\r\n**Platform**: Python 3.9 on python:3.9-bullseye image in AWS\r\n\r\n**Description**:\r\nWe have a cluster in AWS that consists of 3 shards with 3 nodes in each. We serve its data to our users. A typical query contains a few hundred keys. The cluster receives much more reads than writes. \r\nFor some reason, the CPU usage on node 1-1 is significantly higher than on the others. This issue limits our ability to scale horizontally.\r\n\r\nHere is the structure of our code:\r\n```\r\nredis_client = RedisCluster.from_url(\r\n  config.redis_url,\r\n  socket_timeout=config.redis_timeout,\r\n  socket_connect_timeout=config.redis_connect_timeout,\r\n  read_from_replicas=True,\r\n)\r\n...\r\ndef get_data():\r\n  with redis_client.pipeline() as pipe:\r\n    for key in keys:\r\n      pipe.get(key)\r\n    return pipe.execute()\r\n```\r\n\r\nThis graph shows CPU utilization on the nodes:\r\n<img width=""1426"" alt=""image"" src=""https://user-images.githubusercontent.com/5001455/153285384-24a989ef-b411-4886-a83a-ec55d553b67d.png"">\r\n\r\nThis graph shows the number of GET commands received by the nodes:\r\n<img width=""1422"" alt=""image"" src=""https://user-images.githubusercontent.com/5001455/153286052-09b72e55-d465-4903-8346-a5a9680bf5a3.png"">\r\n\r\n', 'reactions': {'url': 'https://api.github.com/repos/redis/redis-py/issues/1932/reactions', 'total_count': 0, '+1': 0, '-1': 0, 'laugh': 0, 'hooray': 0, 'confused': 0, 'heart': 0, 'rocket': 0, 'eyes': 0}, 'timeline_url': 'https://api.github.com/repos/redis/redis-py/issues/1932/timeline', 'performed_via_github_app': None}}",opened,Python
